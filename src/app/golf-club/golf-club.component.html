<main class="main">
  <!-- Search Form -->
  <div class="search-container">
    <input
      type="text"
      placeholder="Search by Maker (e.g., Mizuno, Callaway)"
      [(ngModel)]="searchMaker"
      (input)="searchClubs()"
    />
    <select [(ngModel)]="searchCategory" (change)="searchClubs()">
      <option value="">All Categories</option>
      <option value="DRIVER">Driver</option>
      <option value="IRON">Iron</option>
      <option value="WEDGE">Wedge</option>
      <option value="PUTTER">Putter</option>
    </select>
  </div>

  <!-- Collapsible List of Golf Clubs -->
  <div class="golf-club-list-container" *ngIf="getMakers().length > 0; else noGolfClubs">
    <h2>Golf Clubs</h2>

    <div *ngFor="let maker of getMakers()" class="maker-section">
      <h3 (click)="toggleMaker(maker)">
        {{ maker }} <span [class.expanded]="expandedMakers[maker]">▼</span>
      </h3>

      <div *ngIf="expandedMakers[maker]">
        <div *ngFor="let set of getSets(maker)" class="set-section">
          <h4 (click)="toggleSet(maker, set)">
            {{ set }} <span [class.expanded]="expandedSets[maker][set]">▶</span>
          </h4>

          <div class="club-buttons" *ngIf="expandedSets[maker][set]">
            <button
              *ngFor="let club of groupedGolfClubs[maker][set]"
              class="club-button"
              [ngClass]="{'selected': isClubSelected(club)}"
              (click)="selectClub(club)"
            >
              {{ club.number }}
            </button>
          </div>
          
        </div>
      </div>
    </div>
    <button
    class="club-button"
    (click)="addClubsToBag()"
  >
    {{ "Submit!" }}
  </button>
  </div>



  <!-- No Golf Clubs Message -->
  <ng-template #noGolfClubs>
    <p>No golf clubs found. Try a different search or create one.</p>
  </ng-template>

  <!-- Slide-in Club Details Panel -->
  <div class="club-details-panel" [class.open]="selectedClub" (click)="closePanel($event)">
    <div class="club-details-content" *ngIf="selectedClub">
      <button class="close-btn" (click)="closePanel($event)">✖</button>
      <h3>{{ selectedClub.maker }}</h3>
      <p><strong>Set:</strong> {{ selectedClub.set }}</p>
      <p><strong>Number:</strong> {{ selectedClub.number }}</p>
      <p><strong>Loft:</strong> {{ selectedClub.loft }}°</p>
      <p><strong>Length:</strong> {{ selectedClub.length }}"</p>
      <p><strong>Offset:</strong> {{ selectedClub.club_offset }}"</p>
      <p><strong>Lie Angle:</strong> {{ selectedClub.lie_angle }}°</p>
    </div>
  </div>
</main>
